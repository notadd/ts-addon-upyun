{"version":3,"sources":["model/bucket.entity.ts"],"names":[],"mappings":"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","file":"bucket.entity.js","sourcesContent":["import { Column, Entity, OneToMany, OneToOne, PrimaryColumn } from \"typeorm\";\nimport { AudioConfig } from \"./audio.config.entity\";\nimport { Audio } from \"./audio.entity\";\nimport { Document } from \"./document.entity\";\nimport { File } from \"./file.entity\";\nimport { ImageConfig } from \"./image.config.entity\";\nimport { Image } from \"./image.entity\";\nimport { VideoConfig } from \"./video.config.entity\";\nimport { Video } from \"./video.entity\";\n\n/* 后台配置实体类 */\n@Entity(\"bucket\")\nexport class Bucket {\n\n    // 主键，需要设置插入，1默认为公有空间配置，2默认为私有空间配置\n    @PrimaryColumn()\n    id: number;\n\n    // 公有还是私有空间，值为public、private\n    @Column({ length: 20, unique: true })\n    publicOrPrivate: string;\n\n    // 空间名\n    @Column({ length: 50, unique: true })\n    name: string;\n\n    // 操作员名\n    @Column({ length: 50 })\n    operator: string;\n\n    // 操作员密码的md5\n    @Column({ length: 50 })\n    password: string;\n\n    // 此空间下所有文件都存储于这个目录里,与虚拟目录无关\n    @Column({ length: 20 })\n    directory: string;\n\n    // 请求过期时间，单位秒\n    @Column()\n    requestExpire: number;\n\n    // 基本url\n    @Column({ length: 50, unique: true })\n    baseUrl: string;\n\n    // token密钥\n    @Column({ length: 250, nullable: true })\n    tokenSecretKey: string;\n\n    // token过期时间，单位秒\n    @Column({ nullable: true })\n    tokenExpire: number;\n\n    /*\n    这里lazy:false的意思不是每个Bucket查询出来的时候就会包含imageConfig\n    它的意思只是在于获取的属性是否是Promise，而要查询出来的Bucket包含imageConfig，必须使用find({relation:xxxx})\n    */\n    @OneToOne(type => ImageConfig, imageConfig => imageConfig.bucket, {\n        cascade: [\"insert\"],\n        lazy: false,\n        eager: false\n    })\n    imageConfig: ImageConfig;\n\n    @OneToOne(type => AudioConfig, audioConfig => audioConfig.bucket, {\n        cascade: [\"insert\"],\n        lazy: false,\n        eager: false\n    })\n    audioConfig: AudioConfig;\n\n    @OneToOne(type => VideoConfig, videoConfig => videoConfig.bucket, {\n        cascade: [\"insert\"],\n        lazy: false,\n        eager: false\n    })\n    videoConfig: VideoConfig;\n\n    @OneToMany(type => File, file => file.bucket, {\n        cascade: [\"insert\"],\n        lazy: false,\n        eager: false\n    })\n    files: Array<File>;\n\n    @OneToMany(type => Image, image => image.bucket, {\n        cascade: [\"insert\"],\n        lazy: false,\n        eager: false\n    })\n    images: Array<Image>;\n\n    @OneToMany(type => Audio, audio => audio.bucket, {\n        cascade: [\"insert\"],\n        lazy: false,\n        eager: false\n    })\n    audios: Array<Audio>;\n\n    @OneToMany(type => Video, video => video.bucket, {\n        cascade: [\"insert\"],\n        lazy: false,\n        eager: false\n    })\n    videos: Array<Video>;\n\n    @OneToMany(type => Document, document => document.bucket, {\n        cascade: [\"insert\"],\n        lazy: false,\n        eager: false\n    })\n    documents: Array<Document>;\n}\n"]}